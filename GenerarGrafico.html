<!DOCTYPE html>
<html>
<head>
  <title>Formulario con Gráfico</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <h1>Crear un Gráfico</h1>
  <form id="graphForm">
    <label for="salesLabels">Etiquetas (Separadas por comas):</label>
    <input type="text" id="salesLabels" required><br>
    <label for="salesValues">Valores (Separados por comas):</label>
    <input type="text" id="salesValues" required><br>
    <button type="button" id="generateButton" disabled onclick="generateGraph()">Generar Gráfico</button>
  </form>
  <canvas id="myChart"></canvas>

  <script>
    function generateGraph() {
      // Obtener los valores de los campos de entrada
      var labels = document.getElementById("salesLabels").value.split(",");
      var values = document.getElementById("salesValues").value.split(",");

      // Validar que labels y values son arrays con el mismo tamaño
      if (!labels || !values || labels.length !== values.length) {
        alert("Error: Los datos deben tener la misma cantidad de elementos.");
        return;
      }

      // Convertir los valores a números (opcional para validación)
      values = values.map(value => parseFloat(value));

      // Generar el gráfico de ventas utilizando Chart.js
      var ctx = document.getElementById("myChart").getContext("2d");
      var myChart = new Chart(ctx, {
        type: "pie", // para cambiar los tipos de  graficos
        data: {
          labels: labels,
          datasets: [{
            label: "Ventas",
            data: values,
            backgroundColor: "rgba(75, 192, 192, 0.2)",
            borderColor: "rgba(75, 192, 192, 1)",
            borderWidth: 1
          }]
        },
        options: {
          scales: {
            y: {
              beginAtZero: true
            }
          }
        }
      });
    }

    // Habilitar el botón al completar el formulario
    const form = document.getElementById('graphForm');
    form.addEventListener('keyup', () => {
      const generateButton = document.getElementById('generateButton');
      if (form.checkValidity()) {
        generateButton.disabled = false;
      } else {
        generateButton.disabled = true;
      }
    });
  </script>
</body>
</html>
